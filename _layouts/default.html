<!doctype html>
{% include copyright.html %}
<html lang="{{ site.locale | replace: "_", "-" | default: "en" }}" class="no-js" data-enable-service-worker="{{ site.enable_service_worker }}" data-baseurl="{{ site.baseurl }}">
  <head>
    {% include_cached head.html %}
    {% include head/custom.html %}
    
    <!-- Preload kritischer Ressourcen für bessere Performance -->
    {% if site.background_image %}
      <link rel="preload" href="{{ site.background_image | relative_url }}" as="image" fetchpriority="high">
    {% endif %}
    <link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style">
    <link rel="prefetch" href="{{ '/assets/js/main.min.js' | relative_url }}" as="script">
    
    <!-- Critical CSS für schnelleren First Paint -->
    <style>
      /* Basis-Layout für sofortige Darstellung */
      *,*::before,*::after{box-sizing:border-box}
      html{font-size:16px;-webkit-text-size-adjust:100%}
      body{margin:0;padding-top:76px;background:#252a34;color:#e8e6e3;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif}
      
      /* Masthead (Header) - kritisch für Layout */
      .masthead{position:fixed;top:0;left:0;right:0;height:76px;z-index:1000;background:rgba(37,42,52,0.95);backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}
      .masthead__inner-wrap{display:flex;align-items:center;height:100%;padding:0 1em}
      .greedy-nav{display:flex;align-items:center;height:100%}
      .site-title{font-size:1.8em;font-weight:bold;color:#fff;text-decoration:none}
      .visible-links{display:flex;list-style:none;margin:0;padding:0}
      .visible-links a{display:block;padding:0.5em 0.75em;color:#fff;text-decoration:none}
      
      /* Hero Section - above the fold */
      .page__hero--overlay{position:relative;min-height:300px;background-size:cover;background-position:center}
      .page__hero--overlay .wrapper{position:relative;z-index:2;padding:6em 1em 4em}
      .page__title{font-size:2em;color:#fff;margin:0}
      
      /* Unsichtbar bis CSS geladen */
      .no-js .page-loading{opacity:1}
    </style>
  </head>

  <body class="layout--{{ page.layout | default: layout.layout }}{% if page.classes or layout.classes %}{{ page.classes | default: layout.classes | join: ' ' | prepend: ' ' }}{% endif %}" dir="{% if site.rtl %}rtl{% else %}ltr{% endif %}">
    {% include_cached skip-links.html %}
    {% include_cached masthead.html %}

    <div class="initial-content">
      {{ content }}
      {% include after-content.html %}
    </div>

    {% if site.search == true %}
      <div class="search-content">
        {% include_cached search/search_form.html %}
      </div>
    {% endif %}

    <div id="footer" class="page__footer">
      <footer>
        {% include_cached footer/custom.html %}
        {% include_cached footer.html %}
      </footer>
    </div>

    {% include_cached scripts.html %}
    
    <!-- Offline-Benachrichtigung -->
    <div id="offline-notification" style="display: none; position: fixed; bottom: 20px; right: 20px; background-color: #333; color: white; padding: 10px 20px; border-radius: 4px; z-index: 9999;">
      Sie sind offline. Einige Inhalte könnten nicht verfügbar sein.
    </div>
    
    <script>
      // Offline-Status überwachen
      window.addEventListener('online', function() {
        document.getElementById('offline-notification').style.display = 'none';
      });
      
      window.addEventListener('offline', function() {
        document.getElementById('offline-notification').style.display = 'block';
      });
    </script>
  </body>
</html> 
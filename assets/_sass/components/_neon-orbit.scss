// Orbit-Animationen für die Neon-Umlaut-Punkte (ausgelagert)
// CSS Custom Properties sind zentral in _variables/_css-properties.scss definiert

@keyframes neonOrbitRampBefore {
  from {
    transform: rotate(0deg) translateX(var(--neon-orbit-start-offset-before, -0.10em)) rotate(0deg);
  }
  to {
    transform: rotate(180deg) translateX(var(--neon-orbit-radius, 0.12em)) rotate(-180deg);
  }
}

@keyframes neonOrbitRampAfter {
  from {
    transform: rotate(0deg) translateX(var(--neon-orbit-start-offset-after, 0.14em)) rotate(0deg);
  }
  to {
    transform: rotate(0deg) translateX(var(--neon-orbit-radius, 0.12em)) rotate(0deg);
  }
}

@keyframes neonOrbitSpinBefore {
  from {
    transform: rotate(180deg) translateX(var(--neon-orbit-radius, 0.12em)) rotate(-180deg);
  }
  to {
    transform: rotate(540deg) translateX(var(--neon-orbit-radius, 0.12em)) rotate(-540deg);
  }
}

@keyframes neonOrbitSpinAfter {
  from {
    transform: rotate(0deg) translateX(var(--neon-orbit-radius, 0.12em)) rotate(0deg);
  }
  to {
    transform: rotate(360deg) translateX(var(--neon-orbit-radius, 0.12em)) rotate(-360deg);
  }
}

@keyframes neonOrbitFinishBefore {
  0% {
    // Startposition auf Orbit
    transform: rotate(var(--neon-orbit-start-angle-before, 180deg))
      translateX(var(--neon-orbit-radius, 0.12em))
      rotate(calc(-1 * var(--neon-orbit-start-angle-before, 180deg)));
    opacity: 1;
  }
  60% {
    // Punkte kreiseln weiter (+720deg) und nähern sich dem Mittelpunkt
    transform: rotate(calc(var(--neon-orbit-start-angle-before, 180deg) + 720deg))
      translateX(calc(var(--neon-orbit-radius, 0.12em) * 0.35))
      rotate(calc(-1 * (var(--neon-orbit-start-angle-before, 180deg) + 720deg)));
    opacity: 1;
  }
  75% {
    // Punkte treffen sich im Mittelpunkt - Rotation fixiert bei +1080deg
    transform: rotate(calc(var(--neon-orbit-start-angle-before, 180deg) + 1080deg))
      translateX(0)
      rotate(calc(-1 * (var(--neon-orbit-start-angle-before, 180deg) + 1080deg)));
    opacity: 1;
    background: #ffffff;
    box-shadow: 0 0 40px rgba(255, 255, 255, 1),
      0 0 100px rgba(255, 255, 255, 0.95),
      0 0 200px rgba(255, 255, 255, 0.8);
  }
  85% {
    // Explosion am Mittelpunkt - Position bleibt fixiert, nur scale wächst
    transform: rotate(calc(var(--neon-orbit-start-angle-before, 180deg) + 1080deg))
      translateX(0)
      rotate(calc(-1 * (var(--neon-orbit-start-angle-before, 180deg) + 1080deg)))
      scale(var(--neon-orbit-explosion-scale, 50));
    opacity: 1;
    background: #ffffff;
    box-shadow: 
      0 0 80px rgba(255, 255, 255, 1),
      0 0 180px rgba(255, 255, 255, 0.95),
      0 0 350px rgba(255, 255, 255, 0.85),
      0 0 500px rgba(255, 255, 255, 0.6),
      0 0 25vw rgba(255, 255, 255, 0.4);
  }
  100% {
    // Zurück zu normal am Mittelpunkt
    transform: rotate(calc(var(--neon-orbit-start-angle-before, 180deg) + 1080deg))
      translateX(0)
      rotate(calc(-1 * (var(--neon-orbit-start-angle-before, 180deg) + 1080deg)))
      scale(1);
    opacity: 1;
    background: #ffffff;
    box-shadow: 0 0 30px rgba(255, 255, 255, 1),
      0 0 80px rgba(255, 255, 255, 0.9),
      0 0 150px rgba(255, 255, 255, 0.7);
  }
}

@keyframes neonOrbitFinishAfter {
  0% {
    // Startposition auf Orbit
    transform: rotate(var(--neon-orbit-start-angle-after, 0deg))
      translateX(var(--neon-orbit-radius, 0.12em))
      rotate(calc(-1 * var(--neon-orbit-start-angle-after, 0deg)));
    opacity: 1;
  }
  60% {
    // Punkte kreiseln weiter (+720deg) und nähern sich dem Mittelpunkt
    transform: rotate(calc(var(--neon-orbit-start-angle-after, 0deg) + 720deg))
      translateX(calc(var(--neon-orbit-radius, 0.12em) * 0.35))
      rotate(calc(-1 * (var(--neon-orbit-start-angle-after, 0deg) + 720deg)));
    opacity: 1;
  }
  75% {
    // Punkte treffen sich im Mittelpunkt - Rotation fixiert bei +1080deg
    transform: rotate(calc(var(--neon-orbit-start-angle-after, 0deg) + 1080deg))
      translateX(0)
      rotate(calc(-1 * (var(--neon-orbit-start-angle-after, 0deg) + 1080deg)));
    opacity: 1;
    background: #ffffff;
    box-shadow: 0 0 40px rgba(255, 255, 255, 1),
      0 0 100px rgba(255, 255, 255, 0.95),
      0 0 200px rgba(255, 255, 255, 0.8);
  }
  85% {
    // Explosion am Mittelpunkt - Position bleibt fixiert, nur scale wächst
    transform: rotate(calc(var(--neon-orbit-start-angle-after, 0deg) + 1080deg))
      translateX(0)
      rotate(calc(-1 * (var(--neon-orbit-start-angle-after, 0deg) + 1080deg)))
      scale(var(--neon-orbit-explosion-scale, 50));
    opacity: 1;
    background: #ffffff;
    box-shadow: 
      0 0 80px rgba(255, 255, 255, 1),
      0 0 180px rgba(255, 255, 255, 0.95),
      0 0 350px rgba(255, 255, 255, 0.85),
      0 0 500px rgba(255, 255, 255, 0.6),
      0 0 25vw rgba(255, 255, 255, 0.4);
  }
  100% {
    // Zurück zu normal am Mittelpunkt
    transform: rotate(calc(var(--neon-orbit-start-angle-after, 0deg) + 1080deg))
      translateX(0)
      rotate(calc(-1 * (var(--neon-orbit-start-angle-after, 0deg) + 1080deg)))
      scale(1);
    opacity: 1;
    background: #ffffff;
    box-shadow: 0 0 30px rgba(255, 255, 255, 1),
      0 0 80px rgba(255, 255, 255, 0.9),
      0 0 150px rgba(255, 255, 255, 0.7);
  }
}

@keyframes neonOrbitPopOutBefore {
  0% {
    opacity: 1;
    box-shadow: 0 0 12px rgba(255, 255, 255, 1),
      0 0 36px rgba(255, 255, 255, 0.95),
      0 0 90px rgba(255, 255, 255, 0.8);
  }
  100% {
    opacity: 0;
    box-shadow: 0 0 0 rgba(255, 255, 255, 0);
  }
}

@keyframes neonOrbitPopOutAfter {
  0% {
    opacity: 1;
    box-shadow: 0 0 12px rgba(255, 255, 255, 1),
      0 0 36px rgba(255, 255, 255, 0.95),
      0 0 90px rgba(255, 255, 255, 0.8);
  }
  100% {
    opacity: 0;
    box-shadow: 0 0 0 rgba(255, 255, 255, 0);
  }
}

@keyframes neonOrbitPopInBefore {
  0% {
    transform: translateX(var(--neon-orbit-start-offset-before, -0.10em)) scale(0.6);
    opacity: 0;
  }
  100% {
    transform: translateX(var(--neon-orbit-start-offset-before, -0.10em)) scale(1);
    opacity: 1;
  }
}

@keyframes neonOrbitPopInAfter {
  0% {
    transform: translateX(var(--neon-orbit-start-offset-after, 0.14em)) scale(0.6);
    opacity: 0;
  }
  100% {
    transform: translateX(var(--neon-orbit-start-offset-after, 0.14em)) scale(1);
    opacity: 1;
  }
}

// ============================================
// Scatter Animation - Punkte fliegen wild über den Bildschirm
// ============================================

@keyframes neonOrbitScatterBefore {
  0% {
    transform: rotate(var(--neon-orbit-start-angle-before, 180deg))
      translateX(var(--neon-orbit-radius, 0.12em))
      rotate(calc(-1 * var(--neon-orbit-start-angle-before, 180deg)));
    opacity: 1;
  }
  15% {
    transform: translate(
      var(--neon-scatter-x1-before, 30vw),
      var(--neon-scatter-y1-before, -20vh)
    ) scale(1.5) rotate(180deg);
    opacity: 1;
  }
  35% {
    transform: translate(
      var(--neon-scatter-x2-before, -40vw),
      var(--neon-scatter-y2-before, 30vh)
    ) scale(0.8) rotate(540deg);
    opacity: 1;
  }
  55% {
    transform: translate(
      var(--neon-scatter-x3-before, 50vw),
      var(--neon-scatter-y3-before, -40vh)
    ) scale(1.2) rotate(900deg);
    opacity: 1;
  }
  75% {
    transform: translate(
      var(--neon-scatter-x4-before, -20vw),
      var(--neon-scatter-y4-before, 15vh)
    ) scale(1) rotate(1260deg);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--neon-orbit-start-offset-before, -0.10em)) 
      scale(1) rotate(1440deg);
    opacity: 1;
  }
}

@keyframes neonOrbitScatterAfter {
  0% {
    transform: rotate(var(--neon-orbit-start-angle-after, 0deg))
      translateX(var(--neon-orbit-radius, 0.12em))
      rotate(calc(-1 * var(--neon-orbit-start-angle-after, 0deg)));
    opacity: 1;
  }
  15% {
    transform: translate(
      var(--neon-scatter-x1-after, -35vw),
      var(--neon-scatter-y1-after, 25vh)
    ) scale(1.3) rotate(-180deg);
    opacity: 1;
  }
  35% {
    transform: translate(
      var(--neon-scatter-x2-after, 45vw),
      var(--neon-scatter-y2-after, -35vh)
    ) scale(0.9) rotate(-540deg);
    opacity: 1;
  }
  55% {
    transform: translate(
      var(--neon-scatter-x3-after, -30vw),
      var(--neon-scatter-y3-after, 45vh)
    ) scale(1.4) rotate(-900deg);
    opacity: 1;
  }
  75% {
    transform: translate(
      var(--neon-scatter-x4-after, 25vw),
      var(--neon-scatter-y4-after, -10vh)
    ) scale(1.1) rotate(-1260deg);
    opacity: 1;
  }
  100% {
    transform: translateX(var(--neon-orbit-start-offset-after, 0.14em)) 
      scale(1) rotate(-1440deg);
    opacity: 1;
  }
}

.neon-name.orbit-running .neon-umlaut::before {
  animation-name: neonUmlautFlickerA, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitRampBefore, neonOrbitSpinBefore;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-ramp-duration, 1.2s),
    var(--neon-orbit-period, 6.4s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    ease-out,
    linear;
  animation-iteration-count: infinite, infinite, infinite, infinite, 1, infinite;
  animation-fill-mode: none, none, none, none, forwards, none;
  animation-delay: 0.2s, 0s, 0s, 0s,
    var(--neon-orbit-start-delay, 0.6s),
    calc(var(--neon-orbit-start-delay, 0.6s) + var(--neon-orbit-ramp-duration, 1.2s));
}

.neon-name.orbit-running .neon-umlaut::after {
  animation-name: neonUmlautFlickerB, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitRampAfter, neonOrbitSpinAfter;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-ramp-duration, 1.2s),
    var(--neon-orbit-period, 6.4s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    ease-out,
    linear;
  animation-iteration-count: infinite, infinite, infinite, infinite, 1, infinite;
  animation-fill-mode: none, none, none, none, forwards, none;
  animation-delay: 0.95s, 0s, 0s, 0s,
    var(--neon-orbit-start-delay, 0.6s),
    calc(var(--neon-orbit-start-delay, 0.6s) + var(--neon-orbit-ramp-duration, 1.2s));
}

.neon-name.orbit-finish .neon-umlaut::before {
  animation-name: neonUmlautFlickerA, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitFinishBefore, neonOrbitPopOutBefore;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-finish-duration, 3.4s),
    var(--neon-orbit-pop-duration, 0.4s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    ease-in,
    ease-out;
  animation-iteration-count: infinite, infinite, infinite, infinite, 1, 1;
  animation-fill-mode: none, none, none, none, forwards, forwards;
  animation-delay: 0.2s, 0s, 0s, 0s, 0s,
    calc(var(--neon-orbit-finish-duration, 3.2s) - var(--neon-orbit-pop-duration, 0.5s));
}

.neon-name.orbit-finish .neon-umlaut::after {
  animation-name: neonUmlautFlickerB, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitFinishAfter, neonOrbitPopOutAfter;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-finish-duration, 3.4s),
    var(--neon-orbit-pop-duration, 0.4s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    ease-in,
    ease-out;
  animation-iteration-count: infinite, infinite, infinite, infinite, 1, 1;
  animation-fill-mode: none, none, none, none, forwards, forwards;
  animation-delay: 0.95s, 0s, 0s, 0s, 0s,
    calc(var(--neon-orbit-finish-duration, 3.2s) - var(--neon-orbit-pop-duration, 0.5s));
}

.neon-name.orbit-popin .neon-umlaut::before {
  animation-name: neonUmlautFlickerA, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitPopInBefore;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-pop-duration, 0.4s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    ease-out;
  animation-iteration-count: infinite, infinite, infinite, infinite, 1;
  animation-fill-mode: none, none, none, none, forwards;
  animation-delay: 0.2s, 0s, 0s, 0s, 0s;
}

.neon-name.orbit-popin .neon-umlaut::after {
  animation-name: neonUmlautFlickerB, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitPopInAfter;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-pop-duration, 0.4s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    ease-out;
  animation-iteration-count: infinite, infinite, infinite, infinite, 1;
  animation-fill-mode: none, none, none, none, forwards;
  animation-delay: 0.95s, 0s, 0s, 0s, 0s;
}

.neon-name:not(.orbit-popin) .neon-umlaut::before,
.neon-name:not(.orbit-popin) .neon-umlaut::after {
  opacity: var(--neon-orbit-opacity, 1);
}

// ============================================
// Scatter Animation State - Punkte fliegen wild und kehren zurück
// ============================================

.neon-name.orbit-scatter .neon-umlaut::before {
  animation-name: neonUmlautFlickerA, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitScatterBefore;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-scatter-duration, 3s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    cubic-bezier(0.25, 0.1, 0.25, 1);
  animation-iteration-count: infinite, infinite, infinite, infinite, 1;
  animation-fill-mode: none, none, none, none, forwards;
  animation-delay: 0.2s, 0s, 0s, 0s, 0s;
}

.neon-name.orbit-scatter .neon-umlaut::after {
  animation-name: neonUmlautFlickerB, neonFlickerIrregular, neonJitter, neonLayeredGlow,
    neonOrbitScatterAfter;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 3.1s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s),
    var(--neon-orbit-scatter-duration, 3s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out,
    cubic-bezier(0.25, 0.1, 0.25, 1);
  animation-iteration-count: infinite, infinite, infinite, infinite, 1;
  animation-fill-mode: none, none, none, none, forwards;
  animation-delay: 0.95s, 0s, 0s, 0s, 0.1s;
}

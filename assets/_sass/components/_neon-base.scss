// =============================================================================
// Neon-Effekte Basis-Styles und Keyframes
// =============================================================================
// Diese Datei enthält alle grundlegenden Neon-Animationen und Styles,
// die für den Umlaut-Effekt und andere Neon-Elemente verwendet werden.
// 
// Struktur:
// 1. Keyframes für Flicker-Effekte
// 2. Keyframes für Text-Effekte
// 3. Basis-Styles für .neon-umlaut und .neon-glow
// 
// Abhängigkeiten:
// - variables/_css-properties.scss (CSS Custom Properties)
// - variables/_colors.scss (Farbvariablen)

// =============================================================================
// KEYFRAMES: Umlaut Punkt-Flicker
// =============================================================================

/// Flicker-Animation A für den ersten Umlaut-Punkt (::before)
/// Erzeugt unregelmäßiges Flackern mit Glow-Effekt
@keyframes neonUmlautFlickerA {
  0%, 2.5%, 5%, 7.5%, 10% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
  1.25%, 3.75%, 6.25%, 8.75% {
    opacity: 0.02;
    box-shadow: none;
  }
  10%, 26.7% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
  26.7%, 28.8%, 31% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
  27.8%, 30% {
    opacity: 0.02;
    box-shadow: none;
  }
  31%, 100% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
}

/// Flicker-Animation B für den zweiten Umlaut-Punkt (::after)
/// Leicht versetztes Timing für natürlicheren Effekt
@keyframes neonUmlautFlickerB {
  0%, 5% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
  2.5% {
    opacity: 0.02;
    box-shadow: none;
  }
  5%, 21.7% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
  21.7%, 24.2%, 26.7%, 28% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
  22.9%, 25.4%, 27.2% {
    opacity: 0.02;
    box-shadow: none;
  }
  28%, 100% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.9)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.65));
  }
}

/// Unregelmäßiges Flackern für zusätzliche Variation
@keyframes neonFlickerIrregular {
  0%, 18%, 22%, 25%, 53%, 57%, 100% {
    opacity: 1;
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 14px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.85)),
      0 0 26px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.6));
  }
  20%, 24%, 55% {
    opacity: 0.15;
    box-shadow: 0 0 2px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.6));
  }
}

/// Leichtes Zittern/Jitter für realistischen Neon-Röhren-Effekt
@keyframes neonJitter {
  0%, 100% {
    transform: translate(0, 0);
    filter: blur(0);
  }
  20% {
    transform: translate(0.01em, -0.01em);
    filter: blur(0.2px);
  }
  40% {
    transform: translate(-0.01em, 0.01em);
    filter: blur(0.35px);
  }
  60% {
    transform: translate(0.012em, 0);
    filter: blur(0.2px);
  }
  80% {
    transform: translate(-0.012em, -0.01em);
    filter: blur(0.3px);
  }
}

/// Mehrschichtiger Glow-Puls für die Punkte
@keyframes neonLayeredGlow {
  0%, 100% {
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 14px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.85)),
      0 0 26px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.6)),
      0 0 36px rgba(255, 0, 204, 0.35);
  }
  50% {
    box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-current, rgba(255, 0, 204, 1)),
      0 0 16px var(--neon-umlaut-dot-glow-mid-current, rgba(255, 0, 204, 0.95)),
      0 0 30px var(--neon-umlaut-dot-glow-soft-current, rgba(255, 0, 204, 0.75)),
      0 0 44px rgba(255, 0, 204, 0.45);
  }
}

// =============================================================================
// KEYFRAMES: Text Neon-Effekte
// =============================================================================

/// Mehrschichtiger Text-Glow (für .neon-glow Klasse)
@keyframes neonTextLayeredGlow {
  0%, 100% {
    text-shadow: 0 0 4px rgba(255, 0, 204, 0.9),
      0 0 12px rgba(255, 0, 204, 0.65),
      0 0 28px rgba(255, 0, 204, 0.45),
      0 0 40px rgba(255, 0, 204, 0.3);
  }
  50% {
    text-shadow: 0 0 4px rgba(255, 0, 204, 1),
      0 0 14px rgba(255, 0, 204, 0.8),
      0 0 32px rgba(255, 0, 204, 0.6),
      0 0 48px rgba(255, 0, 204, 0.4);
  }
}

/// Text-Puls Animation
@keyframes neonTextPulse {
  0%, 100% {
    text-shadow: 0 0 4px rgba(255, 0, 204, 0.85),
      0 0 12px rgba(255, 0, 204, 0.6),
      0 0 26px rgba(255, 0, 204, 0.4);
  }
  50% {
    text-shadow: 0 0 6px rgba(255, 0, 204, 1),
      0 0 16px rgba(255, 0, 204, 0.8),
      0 0 32px rgba(255, 0, 204, 0.55);
  }
}

// =============================================================================
// NEON UTILITIES: Basis-Klassen
// =============================================================================

/// Container für den Umlaut mit den leuchtenden Punkten
/// Wird auf das <span class="neon-umlaut">ü</span> angewendet
.neon-umlaut {
  position: relative;
  display: inline-block;
  padding-inline: 0.02em;
  line-height: 1;
  overflow: visible;
}

/// Wrapper für das gesamte Neon-Element (verhindert Textauswahl)
.neon-name {
  user-select: none;
  -webkit-user-select: none;
}

/// Klickbarer Bereich für Orbit-Trigger
.neon-orbit-trigger {
  display: inline-block;
  cursor: inherit;
  user-select: none;
}

.neon-orbit-trigger:focus-visible {
  outline: none;
}

/// Die leuchtenden Punkte über dem "ü"
/// Verwendet CSS Custom Properties aus _css-properties.scss
.neon-umlaut::before,
.neon-umlaut::after {
  content: "";
  position: absolute;
  top: var(--neon-umlaut-dot-offset-top, -0.04em);
  width: var(--neon-umlaut-dot-size, 0.18em);
  height: var(--neon-umlaut-dot-size, 0.18em);
  border-radius: 999px;
  background: var(--neon-umlaut-dot-color, #ffffff);
  opacity: 1;
  box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong, rgba(255, 0, 204, 1)),
    0 0 14px var(--neon-umlaut-dot-glow-mid, rgba(255, 0, 204, 0.85)),
    0 0 26px var(--neon-umlaut-dot-glow-soft, rgba(255, 0, 204, 0.6));
  // Orbit-Mittelpunkt: X = horizontale Mitte, Y = dynamisch
  transform-origin: var(--neon-orbit-center-x, 0.18em) var(--neon-orbit-origin-y, 0.45em);
  animation-name: neonUmlautFlickerA, neonFlickerIrregular, neonJitter, neonLayeredGlow;
  animation-duration: calc(var(--neon-base-flicker-on, 1) * 12s),
    calc(var(--neon-flicker-on, 0) * 3.4s),
    calc(var(--neon-jitter-on, 0) * 1.6s),
    calc(var(--neon-layered-glow-on, 0) * 2.8s);
  animation-timing-function: linear,
    steps(1, end),
    ease-in-out,
    ease-in-out;
  animation-iteration-count: infinite, infinite, infinite, infinite;
  animation-fill-mode: none, none, none, none;
  animation-play-state: running, running, running, running;
}

/// Erster Punkt (links)
.neon-umlaut::before {
  left: var(--neon-orbit-center-x, 0.18em);
  transform: translateX(var(--neon-orbit-start-offset-before, -0.10em));
  background: var(--neon-umlaut-dot-color-before, var(--neon-umlaut-dot-color, #ffffff));
  --neon-umlaut-dot-glow-strong-current: var(--neon-umlaut-dot-glow-strong-before, var(--neon-umlaut-dot-glow-strong, rgba(255, 0, 204, 1)));
  --neon-umlaut-dot-glow-mid-current: var(--neon-umlaut-dot-glow-mid-before, var(--neon-umlaut-dot-glow-mid, rgba(255, 0, 204, 0.85)));
  --neon-umlaut-dot-glow-soft-current: var(--neon-umlaut-dot-glow-soft-before, var(--neon-umlaut-dot-glow-soft, rgba(255, 0, 204, 0.6)));
  box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-before, var(--neon-umlaut-dot-glow-strong, rgba(255, 0, 204, 1))),
    0 0 14px var(--neon-umlaut-dot-glow-mid-before, var(--neon-umlaut-dot-glow-mid, rgba(255, 0, 204, 0.85))),
    0 0 26px var(--neon-umlaut-dot-glow-soft-before, var(--neon-umlaut-dot-glow-soft, rgba(255, 0, 204, 0.6)));
  animation-delay: 0.2s, 0s, 0s, 0s;
}

/// Zweiter Punkt (rechts)
.neon-umlaut::after {
  left: var(--neon-orbit-center-x, 0.18em);
  transform: translateX(var(--neon-orbit-start-offset-after, 0.14em));
  background: var(--neon-umlaut-dot-color-after, var(--neon-umlaut-dot-color, #ffffff));
  --neon-umlaut-dot-glow-strong-current: var(--neon-umlaut-dot-glow-strong-after, var(--neon-umlaut-dot-glow-strong, rgba(255, 0, 204, 1)));
  --neon-umlaut-dot-glow-mid-current: var(--neon-umlaut-dot-glow-mid-after, var(--neon-umlaut-dot-glow-mid, rgba(255, 0, 204, 0.85)));
  --neon-umlaut-dot-glow-soft-current: var(--neon-umlaut-dot-glow-soft-after, var(--neon-umlaut-dot-glow-soft, rgba(255, 0, 204, 0.6)));
  box-shadow: 0 0 6px var(--neon-umlaut-dot-glow-strong-after, var(--neon-umlaut-dot-glow-strong, rgba(255, 0, 204, 1))),
    0 0 14px var(--neon-umlaut-dot-glow-mid-after, var(--neon-umlaut-dot-glow-mid, rgba(255, 0, 204, 0.85))),
    0 0 26px var(--neon-umlaut-dot-glow-soft-after, var(--neon-umlaut-dot-glow-soft, rgba(255, 0, 204, 0.6)));
  animation-delay: 0.95s, 0s, 0s, 0s;
  // Zweite Sequenz für zufälligeren Effekt
  animation-name: neonUmlautFlickerB, neonFlickerIrregular, neonJitter, neonLayeredGlow;
}

/// Text mit Neon-Glow-Effekt
/// @example
///   <span class="neon-glow">Kraftstoff</span>
.neon-glow {
  color: inherit;
  text-shadow: 0 0 4px rgba(255, 0, 204, 0.9),
    0 0 12px rgba(255, 0, 204, 0.65),
    0 0 28px rgba(255, 0, 204, 0.45);
  animation-name: neonTextLayeredGlow, neonTextPulse;
  animation-duration: calc(var(--neon-text-layered-on, 0) * 3.2s),
    calc(var(--neon-text-pulse-on, 0) * 4.6s);
  animation-timing-function: ease-in-out, ease-in-out;
  animation-iteration-count: infinite, infinite;
}
